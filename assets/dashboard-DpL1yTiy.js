import{i as l,r as d,A as j,u as k,k as g,p as N,j as e,B as h,M as v,g as w,l as M,m,X as z,S as A,L as C,O as L}from"./index-BK4vCY88.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_=l("badge-check",O);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],$=l("house",S);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],x=l("list",E),D=({onOpen:n})=>{const s=d.useContext(j);if(!s)throw new Error("AppContext must be used within an AppProvider");const{token:t}=s,[a,r]=d.useState(null),b=k();d.useEffect(()=>{(async()=>{try{const i=await fetch(`${w.backend_url}/api/check-membership`,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(!i.ok)throw new Error("Failed to fetch membership");const y=await i.json();r(y)}catch(i){console.error("Membership fetch error:",i)}})()},[t]);const o=a!=null&&a.membership&&a.expiry_date?g(N(a.expiry_date),new Date)+1:0,c=!(a!=null&&a.membership)||o<=0,f=c||o>0&&o<=3,u=c?"Membership Expired":`${o} day${o===1?"":"s"} left`;return e.jsx("header",{className:"bg-white shadow-sm z-10",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{variant:"ghost",size:"icon",className:"md:hidden mr-1",onClick:n,children:e.jsx(v,{className:"h-5 w-5"})}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-amber-50 border border-amber-100",children:e.jsx("span",{className:"text-sm font-bold bg-gradient-to-r from-amber-600 to-amber-600 bg-clip-text text-transparent",children:"MenuLink"})})]}),f&&e.jsx(h,{variant:c?"destructive":"secondary",onClick:()=>b("/dashboard/membership"),className:`text-sm font-small ${c?" text-white bg-red-500":""}`,children:u})]})})},p=({className:n,onClose:s})=>{const t=M(),a=[{name:"Dashboard",href:"/dashboard/home",icon:$},{name:"All items",href:"/dashboard/menu",icon:x},{name:"Menu Availblity",href:"/dashboard/available",icon:x},{name:"Premium",href:"/dashboard/membership",icon:_},{name:"Settings",href:"/dashboard/restaurant",icon:A}];return e.jsxs("aside",{className:m("w-64 border-r border-gray-200 bg-white",n),children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"MenuLink"}),s&&e.jsx(h,{variant:"ghost",size:"icon",onClick:s,className:"md:hidden",children:e.jsx(z,{className:"h-5 w-5"})})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-1",children:a.map(r=>e.jsxs(C,{to:r.href,onClick:s,className:m("flex items-center px-4 py-2 text-sm font-medium rounded-md",t.pathname===r.href?"bg-amber-50 text-amber-600":"text-gray-600 hover:bg-gray-100"),children:[e.jsx(r.icon,{className:"w-5 h-5 mr-3"}),r.name]},r.name))})]})},B=()=>{const[n,s]=d.useState(!1);return{isOpen:n,onOpen:()=>s(!0),onClose:()=>s(!1)}};function P(){const{isOpen:n,onOpen:s,onClose:t}=B();return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(p,{className:"hidden md:block",onClose:t}),e.jsx(p,{className:`md:hidden fixed inset-y-0 z-50 ${n?"block":"hidden"}`,onClose:t}),e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[e.jsx(D,{onOpen:s}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsx(L,{})})]})]})}export{P as default};
